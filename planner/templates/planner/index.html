<!DOCTYPE html>
<html ng-app="app">
<head>
  <meta charset="utf-8">
  <title>HikeIt Planner</title>

  
  <link rel="stylesheet" href="http://cdn.kendostatic.com/2014.1.528/styles/kendo.common-bootstrap.min.css">
  <link rel="stylesheet" href="http://cdn.kendostatic.com/2014.1.528/styles/kendo.bootstrap.min.css">
    <link rel="stylesheet" href="http://cdn.kendostatic.com/2014.1.528/styles/kendo.bootstrap.mobile.min.css">
  <link href="http://getbootstrap.com/dist/css/bootstrap.css" rel="stylesheet" type="text/css" />
  <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.min.css" rel="stylesheet">
  
  <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.14/angular.min.js"></script>
  <script src="http://cdn.kendostatic.com/2014.1.528/js/kendo.all.min.js"></script>
  <style>
      html, body {
  padding: 0;
  margin: 0;
  width: 100%;
}

.widget {
  margin-bottom: 10px;
}

.widget .k-panelbar .k-content {
  padding: 10px;
}

.placeholder {
  min-height: 100px;
}

.widget.placeholder {
  opacity: 0.4;
  border: 1px dashed #a6a6a6;
}

.widget-centered > img {
  margin: auto;
}

#header {
  position: fixed;
  top: 0;
  z-index: 1024;
  width: 100%;
}

#dashboard {
  margin-top: 60px;
}

.km-navbar {
  background: #428bca;
  color: white;
}
  </style>
</head>
  <script src="https://cdn.rawgit.com/kendo-labs/angular-kendo/master/angular-kendo.js"></script>
  
<body ng-controller="DashboardController">
  {% include 'static_pages/navbar.html' %}
  
  <div class="container" id="dashboard">
    
    <div class="row">
      
      <!-- side column -->
      <div kendo-sortable class="col-sm-4 placeholder" id="side"
           k-connect-with="'#main'" 
           k-placeholder="placeholder" 
           k-hint="hint" 
           k-filter="'.widget'" 
           k-on-change="dropped(kendoEvent)">
        
        <div class="widget">
          <div kendo-panel-bar>
            <li class="k-state-active">
              <span class="k-link k-state-selected">Weather Forecast</span>
              <div>
                <center>
                <div style="width: 300px;"><iframe style="display: block;" src="http://cdnres.willyweather.com/widget/loadView.html?id=26321" width="300" height="228" frameborder="0" scrolling="no"></iframe><a style="display: block;text-indent: -9999em;position: relative;z-index: 1;height: 20px;margin: -20px 0 0 0" href="http://www.willyweather.com/ca/santa-clara-county/palo-alto.html">Palo Alto weather info</a></div>
                </center>
              </div>
            </li>
          </div>
        </div>
        
        <div class="widget">
          <div kendo-panel-bar>
            <li class="k-state-active">
              <span class="k-link k-state-selected">Tide Forecast</span>
              <div>
                <center>
                <div style="width: 300px;">
                  <script type="text/javascript" src="http://tides.tidegraph.com/api/tidegraph.php?bg=white&scale=1"></script>
                </center>
              </div>
            </li>
          </div>
        </div>
        
        <div class="widget">
          <div kendo-panel-bar>
            <li class="k-state-active">
              <span class="k-link k-state-selected">Current Moon Phase</span>
              <div>
                <center>
                  <script type="text/javascript" src="http://widgets.joeswebtools.com/moon-phases/javascript.php"></script>
                </center>
              </div>
            </li>
          </div>
        </div>
      
      <!-- end side column -->
      </div>
      
      <!-- main column -->
      <div kendo-sortable class="col-sm-8 placeholder" id="main"
           k-connect-with="'#side'" 
           k-placeholder="placeholder" 
           k-hint="hint" 
           k-filter="'.widget'" 
           k-on-change="dropped(kendoEvent)">
        
        <div class="widget">
          <ul kendo-panel-bar>
            <li class="k-state-active">
              <span class="k-link k-state-selected">Planned Hikes</span>
              <div>
                {% if planner.trail.count > 0 %}
                {% for trail in planner.trail.all %}
                <a href="/trail/{{ trail.id }}/">{{ trail.name }}</a>
                {% endfor %}
                {% else %}
                <p>You do not have any hikes planned at this time</p>
                {% endif %}
              </div>
            </li>
          </ul> 
        </div>
        
        <div class="widget">
          <ul kendo-panel-bar>
            <li class="k-state-active">
              <span class="k-link k-state-selected">Completed Hikes</span>
              <div>
                {% if user.completed_trails.count > 0 %}
                {% for trail in user.completed_trails.all %}
                <a href="/trail/{{ trail.id }}/">{{ trail.name }}</a>
                {% endfor %}
                {% else %}
                <p>You have not completed any trails</p>
                {% endif %}
              </div>
            </li>
          </ul> 
        </div>
        
      <!-- end main column -->
      </div>
      
    <!-- end row -->
    </div>
    
  <!-- end container -->
  </div>
  
  
  <script>
      (function($) {
    
  var app = angular.module('app', ['kendo.directives']);
  
  app.controller('DashboardController', function ($scope) {
    
    $scope.placeholder = function(element) {
      return element.clone().addClass("placeholder");
    };

    $scope.hint = function(element) {
      return element.clone().addClass("hint")
        .height(element.height())
        .width(element.width());
    };
    
    // when an item is dropped in either the side or
    // main containers, resize any Kendo UI widgets
    // inside
    $scope.dropped = function(e) {
      if (e.action === 'receive') {
        kendo.resize(e.item);
      }
    };
    
    $(window).resize(function () {
      kendo.resize('.widget');
    });
    
  });
  
}(jQuery)); 
   
  </script>
</body>
</html>
