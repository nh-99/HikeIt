{% load staticfiles %}
{% include 'static_pages/navbar.html' %}
<br><br><br><br>
{% include 'static_pages/message.html' %}
<title>HikeIt</title>

<link href="{% static "static_pages/css/bootstrap.min.css" %}" rel="stylesheet">

<div class="container">
<div class="row">
  <div class="col-sm-6 col-md-4"></div>
  <div class="col-sm-6 col-md-4">
    <center>
    <div class="thumbnail">
        {% if images.count > 0 %}
        <div id="myCarousel" class="carousel slide" data-ride="carousel" data-interval="false">
          <!-- Indicators -->
          <ol class="carousel-indicators">
            {% for i in images.all %}
            <li data-target="#myCarousel" data-slide-to="{{ forloop.counter0 }}" {% if forloop.first %} class="active"{% endif %}></li>
            {% endfor %}
          </ol>

          <!-- Wrapper for slides -->
          <div class="carousel-inner" role="listbox">
          {% for image in images.all %}
            <div class="item{% if forloop.first %} active{% endif %}">
              <img src="{{ image.image.url }}" width="500" height="500">
            </div>
          {% endfor %}
          </div>

          <!-- Left and right controls -->
          <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
        </div>
        {% endif %}
      <div class="caption">
        <h3>{{ trail.name }}</h3>
        <p>Location: <a href="{% url 'trail_location' id %}">{{ trail.location }}</a></p>
        <p>Length: {{ length }} miles</p>
        <p>Difficulty: {{ difficulty }}</p>
        <p>Likes: {{ trail.likes }}</p>
        <p>Users completed: {{ trail.completed.count }}</p>
        <button id="like" type="button" onclick="gotoLike()" class="btn btn-success"><span class="glyphicon glyphicon-thumbs-up"></span> Like</button>
        <button id="like" type="button" onclick="gotoCompleted()" class="btn btn-success"><span class="glyphicon glyphicon-flag"></span> Completed</button>
        <button id="uploadImage" type="button" onclick="gotoUpload()" class="btn btn-primary"><span class="glyphicon glyphicon-picture"></span> Upload Image</button>
        <button id="uploadImage" type="button" onclick="gotoReview()" class="btn btn-primary"><span class="glyphicon glyphicon-pencil"></span> Create Review</button>
      </div>
    </div>
    <div class="col-sm-6 col-md-4">
      {% for review in trail.review_set.all %}
      <p>{{ review.review_text }}</p>
      {% endfor %}
    </div>
	</center>
  </div>
</div>
</div>

<script>
	function gotoLike() {
		window.location.href = "/trail/{{ trail.id}}/like";
	}
	
	function gotoCompleted() {
		window.location.href = "/trail/{{ trail.id}}/completed";
	}
    
    function gotoUpload() {
        window.location.href = "/trail/{{ trail.id }}/upload/"
    }
    
    function gotoReview() {
        window.location.href = "/trail/{{ trail.id }}/review/"
    }
</script>
