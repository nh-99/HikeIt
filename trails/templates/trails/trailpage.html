{% load staticfiles %}
{% include 'static_pages/navbar.html' %}
<br><br><br><br>
{% include 'static_pages/message.html' %}
<title>HikeIt</title>
<link href="{% static "static_pages/css/bootstrap.min.css" %}" rel="stylesheet">
<link href="{% static "static_pages/css/shop-item.css" %}" rel="stylesheet">
<link href="{% static "static_pages/css/ionicons.css" %}" rel="stylesheet">
<div class="container">
    <div class="row">
        <div class="col-md-3"></div>
        <div class="col-md-6">
            <div class="thumbnail">
                {% if images.count > 0 %}
                <div id="myCarousel" class="carousel slide" data-ride="carousel" data-interval="false">
                    <!-- Indicators -->
                    <ol class="carousel-indicators">
                        {% for i in images.all %}
                        <li data-target="#myCarousel" data-slide-to="{{ forloop.counter0 }}" {% if forloop.first %} class="active"{% endif %}></li>
                        {% endfor %}
                    </ol>
                    <!-- Wrapper for slides -->
                    <div class="carousel-inner" role="listbox">
                        {% for image in images.all %}
                        <div class="item{% if forloop.first %} active{% endif %}" style="width:800px;height:300px;background-image: url('{{ image.image.url }}');background-size: cover;background-repeat: no-repeat;background-position: 50% 50%;">
                        </div>
                        {% endfor %}
                    </div>
                    <!-- Left and right controls -->
                    <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
                    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                    </a>
                    <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
                    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                    </a>
                </div>
                    {% endif %}
                <div class="caption-full">
                    <h4>
                        <a href="#">{{ trail.name }}</a>
                        <p class="pull-right"><a href="/trail/{{ trail.id }}/upload/" class="btn btn-success"><span class="glyphicon glyphicon-picture"></span> Add Image</a></p>
                    </h4>
                    <p>{{ trail.description }}</p>
                </div>
                <div class="ratings">
                    <p class="pull-right">{{ trail.review_set.count }} {% if trail.review_set.count > 1 %}reviews{% else %}review{% endif %}</p>
                    <p><b>Location:</b> <a href="{% url 'trail_location' id %}">{{ trail.location }}</a></p>
                    <p><b>Length:</b> {{ length }} miles</p>
                    <p><b>Difficulty:</b> {{ difficulty }}</p>
                    <p><b>Likes:</b> {{ trail.likes }}</p>
                    <p><b>Users completed:</b> {{ trail.completed.count }}</p>
                    <div class="row" style="padding-left: 10px; padding-bottom: 10px;">
                        <a href="/trail/{{ trail.id }}/like" class="btn btn-primary"><span class="glyphicon glyphicon-thumbs-up"></span> Like</a>
                        <a href="/trail/{{ trail.id }}/completed" class="btn btn-primary"><span class="ionicons ion-android-walk"></span> Completed</a>
                        
                        <p class="pull-right" style="padding-right: 15px"><a href="/trail/{{ trail.id }}/save" class="btn btn-primary"><span class="glyphicon glyphicon-plus"></span> Save</a></p>
                    </div>
                </div>
            </div>
            <div class="well">
                <div class="text-right">
                    <a href="/trail/{{ trail.id }}/review/" class="btn btn-success"><span class="glyphicon glyphicon-comment"></span> Comment</a>
                </div>
                <hr>
		{% if reviews.count > 0 %}
                {% for review in reviews.all %}
                <div class="row">
                    <div class="col-md-12">
                        <b>{{ review.user.username }}</b>
                        <br><br>
                        <span class="pull-right">{{ review.submission_time.date }}<br></span>
                        <p>{{ review.review_text }}</p>
                    </div>
                </div>
                <hr>
                {% endfor %}
		{% else %}
		<div class="row">
		    <div class="col-md-12">
			<p>No comments found for {{ trail.name }}</p>
		</div>
		</div>
		{% endif %}
		
			<form class="form-inline" role="form" action="/trail/{{ trail.pk }}/review/" method="POST">
				{% csrf_token %}
		    <div class="form-group">
		        <input name="review_text" class="form-control" type="text" placeholder="Your comments" />
		    </div>
		    <div class="form-group">
		        <button class="btn btn-default">Add</button>
		    </div>
		</form>
            </div>
        </div>
    </div>
</div>
